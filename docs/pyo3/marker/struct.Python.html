<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A marker token that represents holding the GIL."><title>Python in pyo3::marker - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="pyo3" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../pyo3/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../pyo3/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Python</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.Ellipsis">Ellipsis</a></li><li><a href="#method.None">None</a></li><li><a href="#method.NotImplemented">NotImplemented</a></li><li><a href="#method.allow_threads">allow_threads</a></li><li><a href="#method.assume_gil_acquired">assume_gil_acquired</a></li><li><a href="#method.cast_as">cast_as</a></li><li><a href="#method.check_signals">check_signals</a></li><li><a href="#method.checked_cast_as">checked_cast_as</a></li><li><a href="#method.eval">eval</a></li><li><a href="#method.eval_bound">eval_bound</a></li><li><a href="#method.from_borrowed_ptr">from_borrowed_ptr</a></li><li><a href="#method.from_borrowed_ptr_or_err">from_borrowed_ptr_or_err</a></li><li><a href="#method.from_borrowed_ptr_or_opt">from_borrowed_ptr_or_opt</a></li><li><a href="#method.from_owned_ptr">from_owned_ptr</a></li><li><a href="#method.from_owned_ptr_or_err">from_owned_ptr_or_err</a></li><li><a href="#method.from_owned_ptr_or_opt">from_owned_ptr_or_opt</a></li><li><a href="#method.get_type">get_type</a></li><li><a href="#method.get_type_bound">get_type_bound</a></li><li><a href="#method.import">import</a></li><li><a href="#method.import_bound">import_bound</a></li><li><a href="#method.new_pool">new_pool</a></li><li><a href="#method.run">run</a></li><li><a href="#method.run_bound">run_bound</a></li><li><a href="#method.version">version</a></li><li><a href="#method.version_info">version_info</a></li><li><a href="#method.with_gil">with_gil</a></li><li><a href="#method.with_gil_unchecked">with_gil_unchecked</a></li><li><a href="#method.with_pool">with_pool</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Clone-for-Python%3C'py%3E">Clone</a></li><li><a href="#impl-Copy-for-Python%3C'py%3E">Copy</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Send-for-Python%3C'py%3E">!Send</a></li><li><a href="#impl-Sync-for-Python%3C'py%3E">!Sync</a></li><li><a href="#impl-RefUnwindSafe-for-Python%3C'py%3E">RefUnwindSafe</a></li><li><a href="#impl-Unpin-for-Python%3C'py%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-Python%3C'py%3E">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-Python%3C'py%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-Python%3C'py%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-Python%3C'py%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-Python%3C'py%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-Python%3C'py%3E">Into&lt;U&gt;</a></li><li><a href="#impl-ToOwned-for-Python%3C'py%3E">ToOwned</a></li><li><a href="#impl-TryFrom%3CU%3E-for-Python%3C'py%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-Python%3C'py%3E">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In pyo3::marker</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../index.html">pyo3</a>::<wbr><a href="index.html">marker</a>::<wbr><a class="struct" href="#">Python</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/pyo3/marker.rs.html#391">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct Python&lt;'py&gt;(_);</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A marker token that represents holding the GIL.</p>
<p>It serves three main purposes:</p>
<ul>
<li>It provides a global API for the Python interpreter, such as <a href="struct.Python.html#method.eval" title="method pyo3::marker::Python::eval"><code>Python::eval</code></a>.</li>
<li>It can be passed to functions that require a proof of holding the GIL, such as
<a href="../prelude/struct.Py.html#method.clone_ref" title="method pyo3::prelude::Py::clone_ref"><code>Py::clone_ref</code></a>.</li>
<li>Its lifetime represents the scope of holding the GIL which can be used to create Rust
references that are bound to it, such as <code>&amp;</code><a href="../types/struct.PyAny.html" title="struct pyo3::types::PyAny"><code>PyAny</code></a>.</li>
</ul>
<p>Note that there are some caveats to using it that you might need to be aware of. See the
<a href="#deadlocks">Deadlocks</a> and <a href="#releasing-and-freeing-memory">Releasing and freeing memory</a>
paragraphs for more information about that.</p>
<h2 id="obtaining-a-python-token"><a href="#obtaining-a-python-token">Obtaining a Python token</a></h2>
<p>The following are the recommended ways to obtain a <a href="struct.Python.html" title="struct pyo3::marker::Python"><code>Python</code></a> token, in order of preference:</p>
<ul>
<li>In a function or method annotated with <a href="../attr.pyfunction.html" title="attr pyo3::pyfunction"><code>#[pyfunction]</code></a> or <a href="../attr.pymethods.html" title="attr pyo3::pymethods"><code>#[pymethods]</code></a> you can declare it
as a parameter, and PyO3 will pass in the token when Python code calls it.</li>
<li>If you already have something with a lifetime bound to the GIL, such as <code>&amp;</code><a href="../types/struct.PyAny.html" title="struct pyo3::types::PyAny"><code>PyAny</code></a>, you can
use its <a href="../types/struct.PyAny.html#method.py" title="method pyo3::types::PyAny::py"><code>.py()</code></a> method to get a token.</li>
<li>When you need to acquire the GIL yourself, such as when calling Python code from Rust, you
should call <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a> to do that and pass your code as a closure to it.</li>
</ul>
<h2 id="deadlocks"><a href="#deadlocks">Deadlocks</a></h2>
<p>Note that the GIL can be temporarily released by the Python interpreter during a function call
(e.g. importing a module). In general, you don’t need to worry about this because the GIL is
reacquired before returning to the Rust code:</p>
<div class="example-wrap"><pre class="language-text"><code>`Python` exists   |=====================================|
GIL actually held |==========|         |================|
Rust code running |=======|                |==|  |======|
</code></pre></div>
<p>This behaviour can cause deadlocks when trying to lock a Rust mutex while holding the GIL:</p>
<ul>
<li>Thread 1 acquires the GIL</li>
<li>Thread 1 locks a mutex</li>
<li>Thread 1 makes a call into the Python interpreter which releases the GIL</li>
<li>Thread 2 acquires the GIL</li>
<li>Thread 2 tries to locks the mutex, blocks</li>
<li>Thread 1’s Python interpreter call blocks trying to reacquire the GIL held by thread 2</li>
</ul>
<p>To avoid deadlocking, you should release the GIL before trying to lock a mutex or <code>await</code>ing in
asynchronous code, e.g. with <a href="struct.Python.html#method.allow_threads" title="method pyo3::marker::Python::allow_threads"><code>Python::allow_threads</code></a>.</p>
<h2 id="releasing-and-freeing-memory"><a href="#releasing-and-freeing-memory">Releasing and freeing memory</a></h2>
<p>The <a href="struct.Python.html" title="struct pyo3::marker::Python"><code>Python</code></a> type can be used to create references to variables owned by the Python
interpreter, using functions such as <a href="struct.Python.html#method.eval" title="method pyo3::marker::Python::eval"><code>Python::eval</code></a> and <a href="../types/struct.PyModule.html#method.import" title="associated function pyo3::types::PyModule::import"><code>PyModule::import</code></a>. These
references are tied to a <a href="../struct.GILPool.html" title="struct pyo3::GILPool"><code>GILPool</code></a> whose references are not cleared until it is dropped.
This can cause apparent “memory leaks” if it is kept around for a long time.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>pyo3::types::PyString;

Python::with_gil(|py| -&gt; PyResult&lt;()&gt; {
    <span class="kw">for _ in </span><span class="number">0</span>..<span class="number">10 </span>{
        <span class="kw">let </span>hello = py.eval_bound(<span class="string">&quot;\&quot;Hello World!\&quot;&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)<span class="question-mark">?</span>.downcast_into::&lt;PyString&gt;()<span class="question-mark">?</span>;
        <span class="macro">println!</span>(<span class="string">&quot;Python says: {}&quot;</span>, hello.to_cow()<span class="question-mark">?</span>);
        <span class="comment">// Normally variables in a loop scope are dropped here, but `hello` is a reference to
        // something owned by the Python interpreter. Dropping this reference does nothing.
    </span>}
    <span class="prelude-val">Ok</span>(())
})
<span class="comment">// This is where the `hello`&#39;s reference counts start getting decremented.</span></code></pre></div>
<p>The variable <code>hello</code> is dropped at the end of each loop iteration, but the lifetime of the
pointed-to memory is bound to <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a>’s <a href="../struct.GILPool.html" title="struct pyo3::GILPool"><code>GILPool</code></a> which will not be dropped until
the end of <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a>’s scope. Only then is each <code>hello</code>’s Python reference count
decreased. This means that at the last line of the example there are 10 copies of <code>hello</code> in
Python’s memory, not just one at a time as we might expect from Rust’s <a href="https://doc.rust-lang.org/stable/book/ch04-01-what-is-ownership.html#ownership-rules">scoping rules</a>.</p>
<p>See the <a href="https://pyo3.rs/main/memory.html#gil-bound-memory">Memory Management</a> chapter of the guide for more information about how PyO3 uses
<a href="../struct.GILPool.html" title="struct pyo3::GILPool"><code>GILPool</code></a> to manage memory.</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Python%3C'_%3E" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#393-478">source</a><a href="#impl-Python%3C'_%3E" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.with_gil" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#435-443">source</a><h4 class="code-header">pub fn <a href="#method.with_gil" class="fn">with_gil</a>&lt;F, R&gt;(f: F) -&gt; R<span class="where fmt-newline">where
    F: for&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;) -&gt; R,</span></h4></section></summary><div class="docblock"><p>Acquires the global interpreter lock, allowing access to the Python interpreter. The
provided closure <code>F</code> will be executed with the acquired <code>Python</code> marker token.</p>
<p>If implementing <a href="../attr.pymethods.html" title="attr pyo3::pymethods"><code>#[pymethods]</code></a> or <a href="../attr.pyfunction.html" title="attr pyo3::pyfunction"><code>#[pyfunction]</code></a>,
declare <code>py: Python</code> as an argument. PyO3 will pass in the token to grant access to the GIL
context in which the function is running, avoiding the need to call <code>with_gil</code>.</p>
<p>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is enabled and the Python runtime is not already
initialized, this function will initialize it. See
<a href="../fn.prepare_freethreaded_python.html" title="fn pyo3::prepare_freethreaded_python"><code>prepare_freethreaded_python</code></a>
for details.</p>
<p>If the current thread does not yet have a Python “thread state” associated with it,
a new one will be automatically created before <code>F</code> is executed and destroyed after <code>F</code>
completes.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<ul>
<li>If the <a href="https://pyo3.rs/main/features.html#auto-initialize"><code>auto-initialize</code></a> feature is not enabled and the Python interpreter is not
initialized.</li>
</ul>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::prelude::<span class="kw-2">*</span>;

Python::with_gil(|py| -&gt; PyResult&lt;()&gt; {
    <span class="kw">let </span>x: i32 = py.eval_bound(<span class="string">&quot;5&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>)<span class="question-mark">?</span>.extract()<span class="question-mark">?</span>;
    <span class="macro">assert_eq!</span>(x, <span class="number">5</span>);
    <span class="prelude-val">Ok</span>(())
})</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.with_gil_unchecked" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#469-477">source</a><h4 class="code-header">pub unsafe fn <a href="#method.with_gil_unchecked" class="fn">with_gil_unchecked</a>&lt;F, R&gt;(f: F) -&gt; R<span class="where fmt-newline">where
    F: for&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;) -&gt; R,</span></h4></section></summary><div class="docblock"><p>Like <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a> except Python interpreter state checking is skipped.</p>
<p>Normally when the GIL is acquired, we check that the Python interpreter is an
appropriate state (e.g. it is fully initialized). This function skips those
checks.</p>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>If <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a> would succeed, it is safe to call this function.</p>
<p>In most cases, you should use <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a>.</p>
<p>A justified scenario for calling this function is during multi-phase interpreter
initialization when <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a> would fail before
<a href="../ffi/fn._Py_InitializeMain.html" title="fn pyo3::ffi::_Py_InitializeMain"><code>_Py_InitializeMain</code></a>
is called because the interpreter is only partially initialized.</p>
<p>Behavior in other scenarios is not documented.</p>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#480-1125">source</a><a href="#impl-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.allow_threads" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#542-553">source</a><h4 class="code-header">pub fn <a href="#method.allow_threads" class="fn">allow_threads</a>&lt;T, F&gt;(self, f: F) -&gt; T<span class="where fmt-newline">where
    F: <a class="trait" href="trait.Ungil.html" title="trait pyo3::marker::Ungil">Ungil</a> + <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; T,
    T: <a class="trait" href="trait.Ungil.html" title="trait pyo3::marker::Ungil">Ungil</a>,</span></h4></section></summary><div class="docblock"><p>Temporarily releases the GIL, thus allowing other Python threads to run. The GIL will be
reacquired when <code>F</code>’s scope ends.</p>
<p>If you don’t need to touch the Python
interpreter for some time and have other Python threads around, this will let you run
Rust-only code while letting those other Python threads make progress.</p>
<p>Only types that implement <a href="trait.Ungil.html" title="trait pyo3::marker::Ungil"><code>Ungil</code></a> can cross the closure. See the
<a href="index.html" title="mod pyo3::marker">module level documentation</a> for more information.</p>
<p>If you need to pass Python objects into the closure you can use <a href="../prelude/struct.Py.html" title="struct pyo3::prelude::Py"><code>Py</code></a><code>&lt;T&gt;</code>to create a
reference independent of the GIL lifetime. However, you cannot do much with those without a
<a href="struct.Python.html" title="struct pyo3::marker::Python"><code>Python</code></a> token, for which you’d need to reacquire the GIL.</p>
<h5 id="example-releasing-the-gil-while-running-a-computation-in-rust-only-code"><a href="#example-releasing-the-gil-while-running-a-computation-in-rust-only-code">Example: Releasing the GIL while running a computation in Rust-only code</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::prelude::<span class="kw-2">*</span>;

<span class="attr">#[pyfunction]
</span><span class="kw">fn </span>sum_numbers(py: Python&lt;<span class="lifetime">&#39;_</span>&gt;, numbers: Vec&lt;u32&gt;) -&gt; PyResult&lt;u32&gt; {
    <span class="comment">// We release the GIL here so any other Python threads get a chance to run.
    </span>py.allow_threads(<span class="kw">move </span>|| {
        <span class="comment">// An example of an &quot;expensive&quot; Rust calculation
        </span><span class="kw">let </span>sum = numbers.iter().sum();

        <span class="prelude-val">Ok</span>(sum)
    })
}</code></pre></div>
<p>Please see the <a href="https://pyo3.rs/main/parallelism.html">Parallelism</a> chapter of the guide for a thorough discussion of using
<a href="struct.Python.html#method.allow_threads" title="method pyo3::marker::Python::allow_threads"><code>Python::allow_threads</code></a> in this manner.</p>
<h5 id="example-passing-borrowed-python-references-into-the-closure-is-not-allowed"><a href="#example-passing-borrowed-python-references-into-the-closure-is-not-allowed">Example: Passing borrowed Python references into the closure is not allowed</a></h5>
<div class="example-wrap compile_fail"><a href="#" class="tooltip" title="This example deliberately fails to compile">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>pyo3::types::PyString;

<span class="kw">fn </span>parallel_print(py: Python&lt;<span class="lifetime">&#39;_</span>&gt;) {
    <span class="kw">let </span>s = PyString::new_bound(py, <span class="string">&quot;This object cannot be accessed without holding the GIL &gt;_&lt;&quot;</span>);
    py.allow_threads(<span class="kw">move </span>|| {
        <span class="macro">println!</span>(<span class="string">&quot;{:?}&quot;</span>, s); <span class="comment">// This causes a compile error.
    </span>});
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.eval" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#563-575">source</a><h4 class="code-header">pub fn <a href="#method.eval" class="fn">eval</a>(
    self,
    code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.str.html">str</a>,
    globals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;'py <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;,
    locals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;'py <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;&amp;'py <a class="struct" href="../types/struct.PyAny.html" title="struct pyo3::types::PyAny">PyAny</a>&gt;</h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: <code>Python::eval</code> will be replaced by <code>Python::eval_bound</code> in a future PyO3 version</span></div></span></summary><div class="docblock"><p>Deprecated version of <a href="struct.Python.html#method.eval_bound" title="method pyo3::marker::Python::eval_bound"><code>Python::eval_bound</code></a></p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.eval_bound" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#595-602">source</a><h4 class="code-header">pub fn <a href="#method.eval_bound" class="fn">eval_bound</a>(
    self,
    code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.str.html">str</a>,
    globals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;&gt;,
    locals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;&gt;
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyAny.html" title="struct pyo3::types::PyAny">PyAny</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Evaluates a Python expression in the given context and returns the result.</p>
<p>If <code>globals</code> is <code>None</code>, it defaults to Python module <code>__main__</code>.
If <code>locals</code> is <code>None</code>, it defaults to the value of <code>globals</code>.</p>
<p>If <code>globals</code> doesn’t contain <code>__builtins__</code>, default <code>__builtins__</code>
will be added automatically.</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>result = py.eval_bound(<span class="string">&quot;[i * 10 for i in range(5)]&quot;</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>).unwrap();
<span class="kw">let </span>res: Vec&lt;i64&gt; = result.extract().unwrap();
<span class="macro">assert_eq!</span>(res, <span class="macro">vec!</span>[<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>])</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.run" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#612-623">source</a><h4 class="code-header">pub fn <a href="#method.run" class="fn">run</a>(
    self,
    code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.str.html">str</a>,
    globals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;,
    locals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.unit.html">()</a>&gt;</h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: <code>Python::run</code> will be replaced by <code>Python::run_bound</code> in a future PyO3 version</span></div></span></summary><div class="docblock"><p>Deprecated version of <a href="struct.Python.html#method.run_bound" title="method pyo3::marker::Python::run_bound"><code>Python::run_bound</code></a></p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.run_bound" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#659-669">source</a><h4 class="code-header">pub fn <a href="#method.run_bound" class="fn">run_bound</a>(
    self,
    code: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.str.html">str</a>,
    globals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;&gt;,
    locals: <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyDict.html" title="struct pyo3::types::PyDict">PyDict</a>&gt;&gt;
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Executes one or more Python statements in the given context.</p>
<p>If <code>globals</code> is <code>None</code>, it defaults to Python module <code>__main__</code>.
If <code>locals</code> is <code>None</code>, it defaults to the value of <code>globals</code>.</p>
<p>If <code>globals</code> doesn’t contain <code>__builtins__</code>, default <code>__builtins__</code>
will be added automatically.</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::{
    prelude::<span class="kw-2">*</span>,
    types::{PyBytes, PyDict},
};
Python::with_gil(|py| {
    <span class="kw">let </span>locals = PyDict::new_bound(py);
    py.run_bound(
        <span class="string">r#&quot;
import base64
s = &#39;Hello Rust!&#39;
ret = base64.b64encode(s.encode(&#39;utf-8&#39;))
&quot;#</span>,
        <span class="prelude-val">None</span>,
        <span class="prelude-val">Some</span>(<span class="kw-2">&amp;</span>locals),
    )
    .unwrap();
    <span class="kw">let </span>ret = locals.get_item(<span class="string">&quot;ret&quot;</span>).unwrap().unwrap();
    <span class="kw">let </span>b64 = ret.downcast::&lt;PyBytes&gt;().unwrap();
    <span class="macro">assert_eq!</span>(b64.as_bytes(), <span class="string">b&quot;SGVsbG8gUnVzdCE=&quot;</span>);
});</code></pre></div>
<p>You can use <a href="macro.py_run.html"><code>py_run!</code></a> for a handy alternative of <code>run</code>
if you don’t need <code>globals</code> and unwrapping is OK.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_type" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#740-745">source</a><h4 class="code-header">pub fn <a href="#method.get_type" class="fn">get_type</a>&lt;T&gt;(self) -&gt; &amp;'py <a class="struct" href="../types/struct.PyType.html" title="struct pyo3::types::PyType">PyType</a><span class="where fmt-newline">where
    T: <a class="trait" href="../type_object/trait.PyTypeInfo.html" title="trait pyo3::type_object::PyTypeInfo">PyTypeInfo</a>,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: <code>Python::get_type</code> will be replaced by <code>Python::get_type_bound</code> in a future PyO3 version</span></div></span></summary><div class="docblock"><p>Gets the Python type object for type <code>T</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.get_type_bound" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#749-754">source</a><h4 class="code-header">pub fn <a href="#method.get_type_bound" class="fn">get_type_bound</a>&lt;T&gt;(self) -&gt; <a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyType.html" title="struct pyo3::types::PyType">PyType</a>&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../type_object/trait.PyTypeInfo.html" title="trait pyo3::type_object::PyTypeInfo">PyTypeInfo</a>,</span></h4></section></summary><div class="docblock"><p>Gets the Python type object for type <code>T</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.import" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#764-769">source</a><h4 class="code-header">pub fn <a href="#method.import" class="fn">import</a>&lt;N&gt;(self, name: N) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;&amp;'py <a class="struct" href="../types/struct.PyModule.html" title="struct pyo3::types::PyModule">PyModule</a>&gt;<span class="where fmt-newline">where
    N: <a class="trait" href="../conversion/trait.IntoPy.html" title="trait pyo3::conversion::IntoPy">IntoPy</a>&lt;<a class="struct" href="../prelude/struct.Py.html" title="struct pyo3::prelude::Py">Py</a>&lt;<a class="struct" href="../types/struct.PyString.html" title="struct pyo3::types::PyString">PyString</a>&gt;&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: <code>Python::import</code> will be replaced by <code>Python::import_bound</code> in a future PyO3 version</span></div></span></summary><div class="docblock"><p>Deprecated form of <a href="struct.Python.html#method.import_bound" title="method pyo3::marker::Python::import_bound"><code>Python::import_bound</code></a></p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.import_bound" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#772-777">source</a><h4 class="code-header">pub fn <a href="#method.import_bound" class="fn">import_bound</a>&lt;N&gt;(self, name: N) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="struct" href="../prelude/struct.Bound.html" title="struct pyo3::prelude::Bound">Bound</a>&lt;'py, <a class="struct" href="../types/struct.PyModule.html" title="struct pyo3::types::PyModule">PyModule</a>&gt;&gt;<span class="where fmt-newline">where
    N: <a class="trait" href="../conversion/trait.IntoPy.html" title="trait pyo3::conversion::IntoPy">IntoPy</a>&lt;<a class="struct" href="../prelude/struct.Py.html" title="struct pyo3::prelude::Py">Py</a>&lt;<a class="struct" href="../types/struct.PyString.html" title="struct pyo3::types::PyString">PyString</a>&gt;&gt;,</span></h4></section></summary><div class="docblock"><p>Imports the Python module with the specified name.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.None" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#782-784">source</a><h4 class="code-header">pub fn <a href="#method.None" class="fn">None</a>(self) -&gt; <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a></h4></section></summary><div class="docblock"><p>Gets the Python builtin value <code>None</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.Ellipsis" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#789-791">source</a><h4 class="code-header">pub fn <a href="#method.Ellipsis" class="fn">Ellipsis</a>(self) -&gt; <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a></h4></section></summary><div class="docblock"><p>Gets the Python builtin value <code>Ellipsis</code>, or <code>...</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.NotImplemented" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#796-798">source</a><h4 class="code-header">pub fn <a href="#method.NotImplemented" class="fn">NotImplemented</a>(self) -&gt; <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a></h4></section></summary><div class="docblock"><p>Gets the Python builtin value <code>NotImplemented</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.version" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#811-817">source</a><h4 class="code-header">pub fn <a href="#method.version" class="fn">version</a>(self) -&gt; &amp;'py <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.str.html">str</a></h4></section></summary><div class="docblock"><p>Gets the running Python interpreter version as a string.</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>Python::with_gil(|py| {
    <span class="comment">// The full string could be, for example:
    // &quot;3.10.0 (tags/v3.10.0:b494f59, Oct  4 2021, 19:00:18) [MSC v.1929 64 bit (AMD64)]&quot;
    </span><span class="macro">assert!</span>(py.version().starts_with(<span class="string">&quot;3.&quot;</span>));
});</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.version_info" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#831-839">source</a><h4 class="code-header">pub fn <a href="#method.version_info" class="fn">version_info</a>(self) -&gt; <a class="struct" href="../struct.PythonVersionInfo.html" title="struct pyo3::PythonVersionInfo">PythonVersionInfo</a>&lt;'py&gt;</h4></section></summary><div class="docblock"><p>Gets the running Python interpreter version as a struct similar to
<code>sys.version_info</code>.</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>Python::with_gil(|py| {
    <span class="comment">// PyO3 supports Python 3.7 and up.
    </span><span class="macro">assert!</span>(py.version_info() &gt;= (<span class="number">3</span>, <span class="number">7</span>));
    <span class="macro">assert!</span>(py.version_info() &gt;= (<span class="number">3</span>, <span class="number">7</span>, <span class="number">0</span>));
});</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.checked_cast_as" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#849-855">source</a><h4 class="code-header">pub fn <a href="#method.checked_cast_as" class="fn">checked_cast_as</a>&lt;T&gt;(
    self,
    obj: <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a>, <a class="struct" href="../struct.PyDowncastError.html" title="struct pyo3::PyDowncastError">PyDowncastError</a>&lt;'py&gt;&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../type_object/trait.PyTypeCheck.html" title="trait pyo3::type_object::PyTypeCheck">PyTypeCheck</a>&lt;AsRefTarget = T&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>obj.downcast_bound::&lt;T&gt;(py)</code> instead of <code>py.checked_cast_as::&lt;T&gt;(obj)</code></span></div></span></summary><div class="docblock"><p>Registers the object in the release pool, and tries to downcast to specific type.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cast_as" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#870-876">source</a><h4 class="code-header">pub unsafe fn <a href="#method.cast_as" class="fn">cast_as</a>&lt;T&gt;(self, obj: <a class="type" href="../prelude/type.PyObject.html" title="type pyo3::prelude::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a><span class="where fmt-newline">where
    T: <a class="trait" href="../type_object/trait.HasPyGilRef.html" title="trait pyo3::type_object::HasPyGilRef">HasPyGilRef</a>&lt;AsRefTarget = T&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>obj.downcast_bound_unchecked::&lt;T&gt;(py)</code> instead of <code>py.cast_as::&lt;T&gt;(obj)</code></span></div></span></summary><div class="docblock"><p>Registers the object in the release pool, and does an unchecked downcast
to the specific type.</p>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_owned_ptr" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#892-897">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr" class="fn">from_owned_ptr</a>&lt;T&gt;(self, ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a><span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_owned_ptr(py, ptr)</code> or <code>Bound::from_owned_ptr(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Registers the object pointer in the release pool,
and does an unchecked downcast to the specific type.</p>
<h5 id="safety-2"><a href="#safety-2">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_owned_ptr_or_err" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#915-920">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr_or_err" class="fn">from_owned_ptr_or_err</a>&lt;T&gt;(
    self,
    ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a>&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_owned_ptr_or_err(py, ptr)</code> or <code>Bound::from_owned_ptr_or_err(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Registers the owned object pointer in the release pool.</p>
<p>Returns <code>Err(PyErr)</code> if the pointer is NULL.
Does an unchecked downcast to the specific type.</p>
<h5 id="safety-3"><a href="#safety-3">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_owned_ptr_or_opt" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#938-943">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_owned_ptr_or_opt" class="fn">from_owned_ptr_or_opt</a>&lt;T&gt;(
    self,
    ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a>&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_owned_ptr_or_opt(py, ptr)</code> or <code>Bound::from_owned_ptr_or_opt(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Registers the owned object pointer in release pool.</p>
<p>Returns <code>None</code> if the pointer is NULL.
Does an unchecked downcast to the specific type.</p>
<h5 id="safety-4"><a href="#safety-4">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_borrowed_ptr" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#960-965">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr" class="fn">from_borrowed_ptr</a>&lt;T&gt;(self, ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a><span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_borrowed_ptr(py, ptr)</code> or <code>Bound::from_borrowed_ptr(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Panics if the pointer is NULL.</p>
<h5 id="safety-5"><a href="#safety-5">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_borrowed_ptr_or_err" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#982-987">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr_or_err" class="fn">from_borrowed_ptr_or_err</a>&lt;T&gt;(
    self,
    ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>
) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a>&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_borrowed_ptr_or_err(py, ptr)</code> or <code>Bound::from_borrowed_ptr_or_err(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Returns <code>Err(PyErr)</code> if the pointer is NULL.</p>
<h5 id="safety-6"><a href="#safety-6">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.from_borrowed_ptr_or_opt" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1004-1009">source</a><h4 class="code-header">pub unsafe fn <a href="#method.from_borrowed_ptr_or_opt" class="fn">from_borrowed_ptr_or_opt</a>&lt;T&gt;(
    self,
    ptr: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.pointer.html">*mut </a><a class="struct" href="../ffi/struct.PyObject.html" title="struct pyo3::ffi::PyObject">PyObject</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;'py T</a>&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="../conversion/trait.FromPyPointer.html" title="trait pyo3::conversion::FromPyPointer">FromPyPointer</a>&lt;'py&gt;,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: use <code>Py::from_borrowed_ptr_or_opt(py, ptr)</code> or <code>Bound::from_borrowed_ptr_or_opt(py, ptr)</code> instead</span></div></span></summary><div class="docblock"><p>Does an unchecked downcast to the specific type.</p>
<p>Returns <code>None</code> if the pointer is NULL.</p>
<h5 id="safety-7"><a href="#safety-7">Safety</a></h5>
<p>Callers must ensure that ensure that the cast is valid.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_signals" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1053-1055">source</a><h4 class="code-header">pub fn <a href="#method.check_signals" class="fn">check_signals</a>(self) -&gt; <a class="type" href="../prelude/type.PyResult.html" title="type pyo3::prelude::PyResult">PyResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Lets the Python interpreter check and handle any pending signals. This will invoke the
corresponding signal handlers registered in Python (if any).</p>
<p>Returns <code>Err(</code><a href="../prelude/struct.PyErr.html" title="struct pyo3::prelude::PyErr"><code>PyErr</code></a><code>)</code> if any signal handler raises an exception.</p>
<p>These signals include <code>SIGINT</code> (normally raised by CTRL + C), which by default raises
<code>KeyboardInterrupt</code>. For this reason it is good practice to call this function regularly
as part of long-running Rust functions so that users can cancel it.</p>
<h5 id="example"><a href="#example">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>pyo3::prelude::<span class="kw-2">*</span>;

<span class="attr">#[pyfunction]
</span><span class="kw">fn </span>loop_forever(py: Python&lt;<span class="lifetime">&#39;_</span>&gt;) -&gt; PyResult&lt;()&gt; {
    <span class="kw">loop </span>{
        <span class="comment">// As this loop is infinite it should check for signals every once in a while.
        // Using `?` causes any `PyErr` (potentially containing `KeyboardInterrupt`)
        // to break out of the loop.
        </span>py.check_signals()<span class="question-mark">?</span>;

        <span class="comment">// do work here
    </span>}
}</code></pre></div>
<h5 id="note"><a href="#note">Note</a></h5>
<p>This function calls <a href="https://docs.python.org/3/c-api/exceptions.html?highlight=pyerr_checksignals#c.PyErr_CheckSignals"><code>PyErr_CheckSignals()</code></a> which in turn may call signal handlers.
As Python’s <a href="https://docs.python.org/3/library/signal.html"><code>signal</code></a> API allows users to define custom signal handlers, calling this
function allows arbitrary Python code inside signal handlers to run.</p>
<p>If the function is called from a non-main thread, or under a non-main Python interpreter,
it does nothing yet still returns <code>Ok(())</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.new_pool" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1122-1124">source</a><h4 class="code-header">pub unsafe fn <a href="#method.new_pool" class="fn">new_pool</a>(self) -&gt; <a class="struct" href="../struct.GILPool.html" title="struct pyo3::GILPool">GILPool</a></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: code not using the GIL Refs API can safely remove use of <code>Python::new_pool</code></span></div></span></summary><div class="docblock"><p>Create a new pool for managing PyO3’s GIL Refs. This has no functional
use for code which does not use the deprecated GIL Refs API.</p>
<p>When this <code>GILPool</code> is dropped, all GIL Refs created after this <code>GILPool</code> will
all have their Python reference counts decremented, potentially allowing Python to drop
the corresponding Python objects.</p>
<p>Typical usage of PyO3 will not need this API, as <a href="struct.Python.html#method.with_gil" title="associated function pyo3::marker::Python::with_gil"><code>Python::with_gil</code></a> automatically creates
a <code>GILPool</code> where appropriate.</p>
<p>Advanced uses of PyO3 which perform long-running tasks which never free the GIL may need
to use this API to clear memory, as PyO3 usually does not clear memory until the GIL is
released.</p>
<h5 id="examples-5"><a href="#examples-5">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>Python::with_gil(|py| {
    <span class="comment">// Some long-running process like a webserver, which never releases the GIL.
    </span><span class="kw">loop </span>{
        <span class="comment">// Create a new pool, so that PyO3 can clear memory at the end of the loop.
        </span><span class="attr">#[allow(deprecated)]  </span><span class="comment">// `new_pool` is not needed in code not using the GIL Refs API
        </span><span class="kw">let </span>pool = <span class="kw">unsafe </span>{ py.new_pool() };

        <span class="comment">// It is recommended to *always* immediately set py to the pool&#39;s Python, to help
        // avoid creating references with invalid lifetimes.
        </span><span class="kw">let </span>py = pool.python();

        <span class="comment">// do stuff...
    </span>}
});</code></pre></div>
<h5 id="safety-8"><a href="#safety-8">Safety</a></h5>
<p>Extreme care must be taken when using this API, as misuse can lead to accessing invalid
memory. In addition, the caller is responsible for guaranteeing that the GIL remains held
for the entire lifetime of the returned <code>GILPool</code>.</p>
<p>Two best practices are required when using this API:</p>
<ul>
<li>From the moment <code>new_pool()</code> is called, only the <code>Python</code> token from the returned
<code>GILPool</code> (accessible using <a href="../struct.GILPool.html#method.python" title="method pyo3::GILPool::python"><code>.python()</code></a>) should be used in PyO3 APIs. All other older
<code>Python</code> tokens with longer lifetimes are unsafe to use until the <code>GILPool</code> is dropped,
because they can be used to create PyO3 owned references which have lifetimes which
outlive the <code>GILPool</code>.</li>
<li>Similarly, methods on existing owned references will implicitly refer back to the
<code>Python</code> token which that reference was originally created with. If the returned values
from these methods are owned references they will inherit the same lifetime. As a result,
Rust’s lifetime rules may allow them to outlive the <code>GILPool</code>, even though this is not
safe for reasons discussed above. Care must be taken to never access these return values
after the <code>GILPool</code> is dropped, unless they are converted to <code>Py&lt;T&gt;</code> <em>before</em> the pool
is dropped.</li>
</ul>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Python%3C'_%3E-1" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1127-1202">source</a><a href="#impl-Python%3C'_%3E-1" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'_&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.with_pool" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1191-1201">source</a><h4 class="code-header">pub fn <a href="#method.with_pool" class="fn">with_pool</a>&lt;F, R&gt;(&amp;self, f: F) -&gt; R<span class="where fmt-newline">where
    F: for&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>(<a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;) -&gt; R + <a class="trait" href="trait.Ungil.html" title="trait pyo3::marker::Ungil">Ungil</a>,</span></h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated since 0.21.0: code not using the GIL Refs API can safely remove use of <code>Python::with_pool</code></span></div></span></summary><div class="docblock"><p>Creates a scope using a new pool for managing PyO3’s GIL Refs. This has no functional
use for code which does not use the deprecated GIL Refs API.</p>
<p>This is a safe alterantive to <a href="struct.Python.html#method.new_pool" title="method pyo3::marker::Python::new_pool"><code>new_pool</code></a> as
it limits the closure to using the new GIL token at the cost of
being unable to capture existing GIL-bound references.</p>
<p>Note that on stable Rust, this API suffers from the same the <code>SendWrapper</code> loophole
as <a href="struct.Python.html#method.allow_threads" title="method pyo3::marker::Python::allow_threads"><code>allow_threads</code></a>, c.f. the documentation of the <a href="trait.Ungil.html" title="trait pyo3::marker::Ungil"><code>Ungil</code></a> trait,</p>
<h5 id="examples-6"><a href="#examples-6">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code>Python::with_gil(|py| {
    <span class="comment">// Some long-running process like a webserver, which never releases the GIL.
    </span><span class="kw">loop </span>{
        <span class="comment">// Create a new scope, so that PyO3 can clear memory at the end of the loop.
        </span><span class="attr">#[allow(deprecated)]  </span><span class="comment">// `with_pool` is not needed in code not using the GIL Refs API
        </span>py.with_pool(|py| {
            <span class="comment">// do stuff...
        </span>});
    }
});</code></pre></div>
<p>The <code>Ungil</code> bound on the closure does prevent hanging on to existing GIL-bound references</p>

<div class="example-wrap compile_fail"><a href="#" class="tooltip" title="This example deliberately fails to compile">ⓘ</a><pre class="rust rust-example-rendered"><code>
Python::with_gil(|py| {
    <span class="kw">let </span>old_str = PyString::new(py, <span class="string">&quot;a message from the past&quot;</span>);

    py.with_pool(|_py| {
        <span class="macro">print!</span>(<span class="string">&quot;{:?}&quot;</span>, old_str);
    });
});</code></pre></div>
<p>or continuing to use the old GIL token</p>

<div class="example-wrap compile_fail"><a href="#" class="tooltip" title="This example deliberately fails to compile">ⓘ</a><pre class="rust rust-example-rendered"><code>
Python::with_gil(|old_py| {
    old_py.with_pool(|_new_py| {
        <span class="kw">let </span>_none = old_py.<span class="prelude-val">None</span>();
    });
});</code></pre></div>
</div></details></div></details><details class="toggle implementors-toggle" open><summary><section id="impl-Python%3C'unbound%3E" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1204-1225">source</a><a href="#impl-Python%3C'unbound%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'unbound&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'unbound&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.assume_gil_acquired" class="method"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#1222-1224">source</a><h4 class="code-header">pub unsafe fn <a href="#method.assume_gil_acquired" class="fn">assume_gil_acquired</a>() -&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'unbound&gt;</h4></section></summary><div class="docblock"><p>Unsafely creates a Python token with an unbounded lifetime.</p>
<p>Many of PyO3 APIs use <code>Python&lt;'_&gt;</code> as proof that the GIL is held, but this function can be
used to call them unsafely.</p>
<h5 id="safety-9"><a href="#safety-9">Safety</a></h5>
<ul>
<li>This token and any borrowed Python references derived from it can only be safely used
whilst the currently executing thread is actually holding the GIL.</li>
<li>This function creates a token with an <em>unbounded</em> lifetime. Safe code can assume that
holding a <code>Python&lt;'py&gt;</code> token means the GIL is and stays acquired for the lifetime <code>'py</code>.
If you let it or borrowed Python references escape to safe code you are
responsible for bounding the lifetime <code>'unbound</code> appropriately. For more on unbounded
lifetimes, see the <a href="https://doc.rust-lang.org/nomicon/unbounded-lifetimes.html">nomicon</a>.</li>
</ul>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Clone-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#390">source</a><a href="#impl-Clone-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#390">source</a><a href="#method.clone" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&amp;self) -&gt; <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h4></section></summary><div class='docblock'>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html#tymethod.clone">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/clone.rs.html#132-134">source</a></span><a href="#method.clone_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;Self</a>)</h4></section></summary><div class='docblock'>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html#method.clone_from">Read more</a></div></details></div></details><section id="impl-Copy-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="../../src/pyo3/marker.rs.html#390">source</a><a href="#impl-Copy-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-Python%3C'py%3E" class="impl"><a href="#impl-RefUnwindSafe-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Send-for-Python%3C'py%3E" class="impl"><a href="#impl-Send-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; !<a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Sync-for-Python%3C'py%3E" class="impl"><a href="#impl-Sync-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; !<a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-Unpin-for-Python%3C'py%3E" class="impl"><a href="#impl-Unpin-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section><section id="impl-UnwindSafe-for-Python%3C'py%3E" class="impl"><a href="#impl-UnwindSafe-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;'py&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Python.html" title="struct pyo3::marker::Python">Python</a>&lt;'py&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/any.rs.html#200">source</a><a href="#impl-Any-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.70.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.70.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/borrow.rs.html#211">source</a><a href="#impl-Borrow%3CT%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/borrow.rs.html#213">source</a></span><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/borrow.rs.html#220">source</a><a href="#impl-BorrowMut%3CT%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.70.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/borrow.rs.html#221">source</a></span><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.70.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#734">source</a><a href="#impl-From%3CT%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#737">source</a></span><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#717">source</a><a href="#impl-Into%3CU%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#726">source</a></span><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-ToOwned-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/alloc/borrow.rs.html#82">source</a><a href="#impl-ToOwned-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html" title="trait alloc::borrow::ToOwned">ToOwned</a> for T<span class="where fmt-newline">where
    T: <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a>,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Owned" class="associatedtype trait-impl"><a href="#associatedtype.Owned" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html#associatedtype.Owned" class="associatedtype">Owned</a> = T</h4></section></summary><div class='docblock'>The resulting type after obtaining ownership.</div></details><details class="toggle method-toggle" open><summary><section id="method.to_owned" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/alloc/borrow.rs.html#87">source</a><a href="#method.to_owned" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html#tymethod.to_owned" class="fn">to_owned</a>(&amp;self) -&gt; T</h4></section></summary><div class='docblock'>Creates owned data from borrowed data, usually by cloning. <a href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html#tymethod.to_owned">Read more</a></div></details><details class="toggle method-toggle" open><summary><section id="method.clone_into" class="method trait-impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/alloc/borrow.rs.html#91">source</a><a href="#method.clone_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html#method.clone_into" class="fn">clone_into</a>(&amp;self, target: <a class="primitive" href="https://doc.rust-lang.org/1.70.0/std/primitive.reference.html">&amp;mut T</a>)</h4></section></summary><div class='docblock'>Uses borrowed data to replace owned data, usually by cloning. <a href="https://doc.rust-lang.org/1.70.0/alloc/borrow/trait.ToOwned.html#method.clone_into">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#777">source</a><a href="#impl-TryFrom%3CU%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#784">source</a></span><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-Python%3C'py%3E" class="impl"><a class="srclink rightside" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#761">source</a><a href="#impl-TryInto%3CU%3E-for-Python%3C'py%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.70.0/src/core/convert/mod.rs.html#768">source</a></span><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.70.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.70.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>